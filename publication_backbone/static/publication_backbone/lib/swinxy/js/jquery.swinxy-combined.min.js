(function(g){function a(a,b){var c;return!(c=g.data(a,d))?g.data(a,d,new h(a,b)):c}function h(a,d){function c(a,d){g(document).on("touchstart",w);f.hasFocus=!0;p="sxy-focus";a&&a(d);p="sxy-hover"}function l(){g(document).off("touchstart",w);f.hasFocus=!1;p="sxy-blur";f.el.triggerHandler(p);p="sxy-hover"}function h(a){s=a;r.x=a.pageX;r.y=a.pageY;f.pt=[r];f.trigger(p)}function k(a){s=a;a=a.originalEvent.targetTouches;for(var d=f.pt=[],b=0,c=a.length;b<c;++b)d.push({x:a[b].pageX,y:a[b].pageY});f.trigger(p)}
function j(a,d,c,n){y.push(a={e:a,hnd:c,l:0,el:n||f.el});c=0;for(n=d.length;c<n;++c)u[b[d[c]]].push(a)}var f=this,p="sxy-hover",r={x:0,y:0,down:!1},y=[],u={},s;this.options=d=g.extend({},e,d);this.el=g(a);this.pt=[];this.g={};this.h={};this.hasFocus=!1;for(var v=0;v<b.length;++v)u[b[v]]=[];m||(j("mouseenter",[0,2,4],function(a){f.hasFocus||c(h,a);p="sxy-hover";h(a)}),j("mouseleave",[1,2,5],function(a){r.down?p="sxy-up":p="sxy-hover";r.down=!1;h(a);l(h,a)}),j("mousedown",[3,4],function(a){p="sxy-down";
r.down=!0;h(a);p="sxy-move"}),j("mouseup",[0,1,2,3,4,5],function(a){p="sxy-up";r.down=!1;h(a);p="sxy-hover"}),j("mousemove",[2,4],h));j("touchstart",[0,1,2,3,4,5],function(a){p="sxy-down";f.hasFocus||c(k,a);k(a);p="sxy-move"});j("touchend",[0,1,2,3,4,5],function(a){p="sxy-up";k(a);p="sxy-hover"});j("touchmove",[0,1,2,3,4,5],k);var w=function(a){0==f.pt.length&&l(k,a)},z=g.Event;this.trigger=function(a,d){s.preventDefault();d=d||{};d.pointers=f.pt;d.originalEvent=s;f.el.trigger(z(a,d))};this.eventEnabler=
function(a,d){for(var b,c=u[a],n=d?1:-1,q=0,e=c.length;q<e;++q)switch((b=c[q]).l+=n){case 0:b.el.off(b.e,b.hnd);break;case 1:b.el.on(b.e,b.hnd)}};f.focus=c;f.blur=l}for(var f=navigator.userAgent.toLowerCase(),m=-1<f.indexOf("android")&&-1<f.indexOf("mobile"),d="swinxytouch",e={preventDefault:!1,stopPropagation:!1},b="sxy-focus sxy-blur sxy-hover sxy-down sxy-move sxy-up".split(" "),f=function(d){return function(){a(this).eventEnabler(d,!0)}},c=function(d){return function(){a(this).eventEnabler(d,
!1)}},k=0,l=b.length;k<l;++k){var j=b[k];g.event.special[j]={setup:f(j),teardown:c(j)}}g.fn[d]=function(d){return this.each(function(){var b=a(this);d&&b[d]&&b[d].apply(b,Array.prototype.slice.call(arguments,1))})};g.fn[d].g=function(d,c,e){g.event.special[d]={setup:function(){var l=a(this),f,g;g=l.g[d]=new c(l,e);for(var h=0,j=b.length;h<j;++h)if(g[f=b[h]])l.el.on(f,g[f])},teardown:function(){for(var e=a(this),l,f=e.g[d],t=0,g=b.length;t<g;++t)c[l=b[t]]&&e.el.off(l,f);e.g[d]=null}}};g.fn[d].d=function(a,
d){var b=a.x-d.x,c=a.y-d.y;return Math.sqrt(b*b+c*c)};g.fn[d].a=function(a,d){var b;return 0>(b=Math.atan2(a.y-d.y,a.x-d.x))?360-b:b};g.fn[d].h=function(a,d){h.prototype[a]=function(){this.h[a]=new d(this)}};g.fn[d].m=function(a,d){return{x:(a.x+d.x)/2,y:(a.y+d.y)/2}}})(jQuery);
(function(g){var a="sxy-scale";g.fn.swinxytouch.g(a,function(h,f){function m(b,f){var n=b.pointers;k.state=f;k.scale=d(n[0],n[1])/c;k.position=e(n[0],n[1]);h.trigger(a,k)}var d=g.fn.swinxytouch.d,e=g.fn.swinxytouch.m,b,c,k={};this["sxy-down"]=function(a){a=a.pointers;2==a.length&&(b=!1,c=d({x:a[0].x,y:a[0].y},{x:a[1].x,y:a[1].y}))};this["sxy-up"]=function(a){b&&m(a,3)};this["sxy-move"]=function(a){var e=a.pointers;2==e.length&&(b?m(a,2):Math.abs(1-d(e[0],e[1])/c)>f.minScale&&(b=!0,m(a,1)))}},{minScale:0.2})})(jQuery);
(function(g){g.fn.swinxytouch.h("bound",function(a){var h=a.el.offset(),f=h.left,m=h.top,d=f+a.el.width(),e=m+a.el.height();a.el.on("sxy-hover sxy-down sxy-up sxy-move sxy-focus",function(b){var c=b.pointers[0];c.y<m||c.x>d||c.y>e||c.x<f?a.hasFocus&&a.blur():a.hasFocus||(a.focus(),a.el.trigger(g.Event("sxy-focus",{pointers:b.pointers,originalEvent:b.originalEvent})))})})})(jQuery);
(function(g,a){function h(d,e){this.e=d.get(0);this.j=d.first();e!=a&&g.extend(this,e)}function f(a,e){var b=this;b.element=g(a);b.options=g.extend({},m,e);b.driver=new g.fn.swinxyzoom.modes[b.options.mode](this);b.initialised=!1;b.enabled=!1;b.waiting=null;b.element.css({cursor:"default"});b.dmp={cX:0,tX:0,cY:0,tY:0,timer:!1};b.hasFocus=!1;b._animate=function(){var a=b.dmp,d=b.si.e.style,c=b.options.damping,e=a.tX-a.cX,f=a.tY-a.cY;d.left=(a.cX+=e/c)+"px";d.top=(a.cY+=f/c)+"px";0==~~e&&0==~~f&&(clearTimeout(a.timer),
a.timer=!1)};b._moveSlider=function(a){a=a.pointers[0].y;var d=b.ct.sl.j.offset(),c=b.maxZoom/b.ct.sl.j.height();a=b.ct.sl.j.height()-(a-d.top);b.zoom(a*c,b.cursor.lastX,b.cursor.lastY)};b._focus=function(){b.hasFocus=!0;b.ct.j.show();b.ct.ol.j.stop().animate({opacity:0.5},{queue:!1});b.ct.j.show()};b._blur=function(){b.hasFocus=!1;b.ct.j.hide();b.ct.ol.j.stop().animate({opacity:0},{queue:!1,complete:function(){}})};b._mousewheel=function(a,d,c,e){a.preventDefault();b.zoom(b.level+Math.round(e*(b.maxZoom/
b.options.steps)),a.pageX,a.pageY)};b._stepIn=function(a){a.preventDefault();b.zoom(b.level+Math.round(1*(b.maxZoom/b.options.steps)),b.cursor.lastX,b.cursor.lastY)};b._stepOut=function(a){a.preventDefault();b.zoom(b.level+Math.round(-1*(b.maxZoom/b.options.steps)),b.cursor.lastX,b.cursor.lastY)};var c;b._scale=[];b._scale[1]=function(){c=b.level;g("#info").append("start["+c+"] ")};b._scale[2]=function(a){g("#info").append("s ");g("#info").append("s["+Math.abs(c*a.scale)+","+a.position.x+"] ");b.zoom(c*
a.scale,a.position.x,a.position.y)};b._scale[3]=function(){};var f=b.element.children().first().attr("src"),l=b.element.attr("href"),h=new Image;h.onload=function(){b.load(f,l)};h.src=f}var m={damping:8,steps:15,mode:"dock"};f.prototype.load=function(a,e,b){var c=this;!1==c.initialised&&c.tearUp();b&&c._focus();c.dp.tn.src=a;c.si.src=e;c.dp.tn.j.attr("src")!=c.dp.tn.src&&(c.dp.tn.j.one("load",function(){c.rt.j.css({width:c.dp.tn.j.width(),height:c.dp.tn.j.height()});c.dp.tn.j.stop().animate({opacity:1},
{queue:!1,complete:function(){c.rt.j.css({background:"url('"+c.dp.tn.src+"')"});c.dp.tn.j.css({opacity:0})}})}),c.dp.tn.j.attr("src",c.dp.tn.src));var f=function(a,d){var b;c.si.j.one("load",function(){c.dp.j.off("sxy-move sxy-hover",b);c.waiting=null;c.rebuild();c.zoom(c.maxZoom,c.cursor.lastX,c.cursor.lastY);c.driver.load&&c.driver.load(c.cursor.lastX,c.cursor.lastY);c.zoom(c.maxZoom,c.cursor.lastX,c.cursor.lastY);c.rt.j.toggleClass("sxy-zoom-loading")});c.cursor={lastX:a,lastY:d};c.dp.j.on("sxy-move sxy-hover",
b=function(a){a=a.pointers[0];c.cursor={lastX:a.x,lastY:a.y}});c.si.j.attr("src",c.si.src)};if(b)c.waiting=null,c.rt.j.toggleClass("sxy-zoom-loading"),f(0,0);else if(!c.waiting)c.rt.j.one("sxy-focus",c.waiting=function(a){c.rt.j.toggleClass("sxy-zoom-loading");f(a.pointers[0].x,a.pointers[0].y)})};f.prototype.getNaturalSize=function(a){var e=new Image;e.src=a;return{w:e.width,h:e.height}};f.prototype.rebuild=function(){var a=this.dp,e=this.vp,b=this.si,c=this.vf;g.extend(a,{w:a.tn.j.width(),h:a.tn.j.height(),
ol:a.j.offset().left,ot:a.j.offset().top,hyp:Math.round(Math.sqrt(Math.pow(a.tn.j.width(),2)+Math.pow(a.tn.j.height(),2)))});a.j.css({width:a.w,height:a.h});a.ovl.j.css({width:a.w,height:a.h});this.rt.j.css({width:a.w,height:a.h});g.extend(e,{w:a.w,h:a.h});this.vp.j.css({width:a.w,height:a.h});e=this.getNaturalSize(this.si.src);g.extend(b,{w:0,h:0,l:0,t:0,mL:0,mT:0,oHyp:Math.round(Math.sqrt(Math.pow(e.w,2)+Math.pow(e.h,2))),oH:e.h,oW:e.w});g.extend(c,{w:0,h:0,l:0,t:0});this.ct.j.css({height:a.h});
this.ct.sl.j.css({height:this.ct.sl.h=this.ct.j.height()-(this.ct.zin.j.outerHeight()+this.ct.zout.j.outerHeight())});this.ct.sl.h-=16;clearTimeout(this.dmp.timer);this.dmp={cX:0,tX:0,cY:0,tY:0,timer:!1};this.scale=Math.atan(this.si.oH/this.si.oW);this.angle=0;this.maxZoom=b.oHyp-a.hyp;this.level=0};f.prototype.tearUp=function(){var a=this;a.initialised=!0;a.el=new h(a.element);a.el.tn=new h(a.element.children());var e=a.getNaturalSize(a.el.tn.j.attr("src")),b={w:e.w,h:e.h,srcthumb:a.el.tn.j.attr("src"),
mode:a.options.mode};a.el.j.wrap('<div class="sxy-zoom-container sxy-zoom-mode-{mode}" style="width: {w}px; height: {h}px; background: url({srcthumb})" ></div>'.replace(/\{(\w+)\}/g,function(a,d){return b[d]||a}));a.element.hide();a.rt=new h(a.el.j.parent());a.rt.j.append('<div class="sxy-controls" style="height: {h}px;" ><div class="overlay" style="height: {h}px;"></div><a class="in" href="#"></a><div class="sxy-slider" style="height:{h}px;"><div class="sxy-handle" style="top: 0px;"></div></div><a class="out" href="#"></a></div><div class="sxy-zoom-dragpad" style="width:{w}px; height:{h}px;"><div class="sxy-overlay" style="width: {w}px; height: {h}px;"></div><div class="sxy-zoom-viewport"><img galleryimg="no" /></div><img class="inner-thumb" src="{srcthumb}" /><div class="sxy-zoom-viewfinder"></div></div><div class="sxy-loading"><span></span></div>'.replace(/\{(\w+)\}/g,
function(a,d){return b[d]||a}));a.rt.j.on("dragstart",function(){return!1});a.ct=new h(a.rt.j.find(".sxy-controls").hide());a.ct.ol=new h(a.ct.j.find(".overlay"));a.ct.zin=new h(a.ct.j.find(".in"));a.ct.zout=new h(a.ct.j.find(".out"));a.ct.sl=new h(a.ct.j.find(".sxy-slider").first(),{h:0});a.ct.hnd=new h(a.ct.j.find(".sxy-handle"));a.dp=new h(a.rt.j.find(".sxy-zoom-dragpad").first(),{w:0,h:0,ol:0,ot:0,hyp:0});a.dp.ovl=new h(a.dp.j.find(".sxy-overlay"));a.dp.tn=new h(a.dp.j.find(".inner-thumb").css({opacity:0}),
{src:""});a.vp=new h(a.dp.j.find(".sxy-zoom-viewport").css({opacity:0}),{w:0,h:0});a.si=new h(a.vp.j.find("img"),{w:0,h:0,l:0,t:0,mL:0,mT:0,oHyp:0,oH:0,oW:0,src:""});a.vf=new h(a.dp.j.find(".sxy-zoom-viewfinder").css({display:"none"}),{w:0,h:0,l:0,t:0,osl:0,ost:0});a.rt.j.on("sxy-focus",a._focus);a.rt.j.on("sxy-blur",a._blur);if(g.event.special.mousewheel)a.rt.j.on("mousewheel",a._mousewheel);a.dp.j.on("sxy-scale",function(b){a._scale[b.state](b)});a.ct.zin.j.on("click",a._stepIn);a.ct.zout.j.on("click",
a._stepOut);a.ct.sl.j.on("sxy-down sxy-move",a._moveSlider)};f.prototype.move=function(a,e,b){var c=-1*(a/this.scale),f=-1*(e/this.scale);this.cursor.lastX=c+this.vf.w/2+this.dp.ol;this.cursor.lastY=f+this.vf.h/2+this.dp.ot;0>c&&(c=a=0);0>f&&(f=e=0);c+this.vf.w>this.dp.w&&(c=this.dp.w-this.vf.w,a=this.si.mL);f+this.vf.h>this.dp.h&&(f=this.dp.h-this.vf.h,e=this.si.mT);this.vf.l=~~c;this.vf.t=~~f;this.dmp.tX=a;this.dmp.tY=e;b&&!1!=this.options.damping?this.dmp.timer||(this.dmp.timer=setInterval(this._animate,
16)):(clearTimeout(this.dmp.timer),this.dmp.timer=!1,b=this.si.e.style,b.left=(this.dmp.tX=this.dmp.cX=a)+"px",b.top=(this.dmp.tY=this.dmp.cY=e)+"px")};f.prototype.center=function(a,e,b){this.move(-1*(a-this.vf.w/2)*this.scale,-1*(e-this.vf.h/2)*this.scale,b)};f.prototype.zoom=function(a,e,b){this.level=a;0>this.level&&(this.level=0);this.level>this.maxZoom&&(this.level=this.maxZoom);a=100*((this.si.oHyp-this.level)/this.si.oHyp);this.ct.hnd.j.css({top:this.ct.sl.h-this.ct.sl.h/100*100*(this.level/
this.maxZoom)});this.vf.w=this.vp.w/100*a;this.vf.h=this.vp.h/100*a;this.vf.osl=parseInt(this.vf.j.css("border-left-width"),10);this.vf.ost=parseInt(this.vf.j.css("border-top-width"),10);this.scale=this.si.oW/this.vp.w/(this.si.oW/100*a/this.vp.w);this.si.w=this.si.oW/(this.si.oW/100*a/this.dp.w);this.si.h=this.si.oH/(this.si.oH/100*a/this.dp.h);this.vf.j.css({width:this.vf.w,height:this.vf.h});this.si.j.css({width:this.si.w,height:this.si.h});this.si.mL=0-(this.si.w-this.vp.w);this.si.mT=0-(this.si.h-
this.vp.h);this.driver.zoom&&this.driver.zoom(e,b)};g.fn.swinxyzoom=function(a){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var b;if(b=g.data(this,"swinxyzoom")){if(b[a])return b[a].apply(b,e);g.error("Method "+a+" does not exist on jQuery.swinxyzoom")}else g.data(this,"swinxyzoom",new f(this,a))})};g.fn.swinxyzoom.modes={}})(jQuery);
(function(g){g.fn.swinxyzoom.modes.dock=function(a){function g(){b&&(b=!1,a.vf.j.hide(),a.dp.ovl.j.stop().animate({opacity:0},{queue:!1}),a.vp.j.stop().animate({opacity:0,left:a.dp.w/2,top:a.dp.h/2,width:0,height:0},{queue:!1}))}function f(d,e){a.waiting||(b=!0,a.si.j.show(),a.vp.j.show(),a.vf.j.show(),a.dp.ovl.j.stop().animate({opacity:0.5},{queue:!1}),a.vp.j.stop().animate({opacity:1,left:a.dp.w+10,top:0,width:a.vp.w,height:a.vp.h},{queue:!1}),c.move(d,e,!0))}function m(){a.rt.j.on("sxy-focus",
function(a){a=a.pointers[0];f(a.x,a.y)});a.rt.j.on("sxy-blur",function(){g()});a.dp.j.on("sxy-hover sxy-move sxy-down",k)}function d(){var b=a.vf,c=a.vf.e.style;b.l!=j||b.t!=n?(c.left=(j=b.l)+"px",c.top=(n=b.t)+"px",c.backgroundPosition="-"+(b.l+a.vf.osl)+"px -"+(b.t+a.vf.ost)+"px",l=setTimeout(d,8)):l=!1}function e(c,e,n){var j=a.dp.j.offset(),k=j.left,j=j.top,m=k+a.dp.j.width(),x=j+a.dp.j.height();e<j||c>m||e>x||c<k?g():(b||f(c,e),a.center(c-a.dp.ol,e-a.dp.ot,n),l||d())}var b=this.initialised=!1,
c=this,k=function(a){1==a.pointers.length&&(a=a.pointers[0],e(a.x,a.y,!0))},l=!1,j,n;c.tearUp=m;c.load=function(b,d){a.vp.j.css({width:0,height:0,left:a.dp.w/2,top:a.dp.h/2});a.dp.ovl.j.css({opacity:0});a.vf.j.css({"background-image":"url("+a.dp.tn.src+")"});j=n=0;c.initialised||m();a.hasFocus&&f(b,d)};c.focus=f;c.blur=g;c.move=e;c.zoom=function(a,b){e(a,b,!1)}}})(jQuery);
(function(g){g.fn.swinxyzoom.modes.lens=function(a){function g(d,f){a.waiting||(b=!0,a.dp.j.on("sxy-hover sxy-move sxy-down",c),a.vp.j.show(),a.vp.j.stop().animate({opacity:1,width:a.vp.w,height:a.vp.h},{queue:!1}),e.move(d,f,!0))}function f(){b&&(b=!1,a.dp.j.off("sxy-hover sxy-move sxy-down",c),a.vp.j.stop().animate({opacity:0},{queue:!1,complete:function(){a.vp.j.hide()}}))}function m(){var b=a.vf,c=a.vp,d=a.vp.e.style;b.l!=l||b.t!=j?(d.left=a.cursor.lastX-a.dp.ol-c.w/2+"px",d.top=a.cursor.lastY-
a.dp.ot-c.h/2+"px",k=setTimeout(m,8)):k=!1}function d(b,c,d){a.center(b-a.dp.ol,c-a.dp.ot,d);k||m()}this.initialised=!1;var e=this,b=!0,c=function(a){1==a.pointers.length&&(a=a.pointers[0],d(a.x,a.y,!0))},k=!1,l,j;e.tearUp=function(){a.dp.j.swinxytouch("bound");a.dp.j.on("sxy-focus",function(a){g(a.pointers[0].x,a.pointers[0].y)});a.dp.j.on("sxy-blur",function(){f()})};e.load=function(b,c){a.vp.j.css({opacity:0,width:200,height:200,left:0,top:0});a.vp.w=200;a.vp.h=200;a.vp.j.show();a.si.j.show();
a.vf.j.hide();l=j=0;e.initialised||e.tearUp();a.hasFocus&&g(b,c)};e.focus=g;e.blur=f;e.move=d;e.zoom=function(a,b){d(a,b,!1)}}})(jQuery);
(function(g){g.fn.swinxyzoom.modes.slippy=function(a){var g,f,m,d;function e(){a.dp.j.on("sxy-focus",function(a){b(a.pointers[0].x,a.pointers[0].y)});a.dp.j.on("sxy-blur",function(){c()});a.dp.j.on("sxy-down",function(b){a.dp.j.toggleClass("down");b=b.pointers[0];g=a.dmp.tX;f=a.dmp.tY;m=b.x-a.dp.ol;d=b.y-a.dp.ot});a.dp.j.on("sxy-up",function(){a.dp.j.toggleClass("down")});a.dp.j.on("sxy-move",function(b){b=b.pointers[0];a.move(g+(b.x-a.dp.ol-m),f+(b.y-a.dp.ot-d),!0);j||k()})}function b(){a.waiting||
(a.si.j.show(),a.vp.j.show(),a.vf.j.show(),a.vp.j.stop().animate({opacity:1},{queue:!1}))}function c(){a.vf.j.hide();a.vp.j.animate({opacity:0},{queue:!1})}function k(){var b=a.vf,c=a.vf.e.style;b.l!=n||b.t!=q?(c.left=(n=b.l)+"px",c.top=(q=b.t)+"px",j=setTimeout(k,8)):j=!1}this.initialised=!1;var l=this;d=m=f=g=void 0;var j=!1,n,q;l.tearUp=e;l.load=function(c,j){a.vp.j.css({opacity:0,width:a.dp.w,height:a.dp.h,left:0,top:0});f=g=0;m=c;d=j;a.center(a.dp.w/2,a.dp.h/2,!1);n=q=0;l.initialised||e();a.hasFocus&&
b(c,j)};l.focus=b;l.blur=c;l.zoom=function(){a.center(a.cursor.lastX-a.dp.ol,a.cursor.lastY-a.dp.ot,!1);a.vf.j.css({left:a.vf.l,top:a.vf.t})}}})(jQuery);
(function(g){g.fn.swinxyzoom.modes.window=function(a){function g(b,c){a.waiting||(a.si.j.show(),a.vp.j.show(),a.vf.j.show(),a.vp.j.stop().animate({opacity:1},{queue:!1}),d(b,c,!0))}function f(){a.vf.j.hide();a.vp.j.stop().animate({opacity:0},{queue:!1})}function m(){var d=a.vf,e=a.vf.e.style;d.l!=c||d.t!=k?(e.left=(c=d.l)+"px",e.top=(k=d.t)+"px",b=setTimeout(m,8)):b=!1}function d(c,d,e){a.center(c-a.dp.ol,d-a.dp.ot,e);b||m()}var e=this,b=this.initialised=!1,c,k;e.tearUp=function(){a.rt.j.on("sxy-focus",
function(a){g(a.pointers[0].x,a.pointers[0].y)});a.rt.j.on("sxy-blur",function(){f()});a.dp.j.on("sxy-hover sxy-move sxy-down",function(a){1==a.pointers.length&&(a=a.pointers[0],d(a.x,a.y,!0))})};e.load=function(b,d){a.vp.j.css({opacity:0,width:a.dp.w,height:a.dp.h,left:0,top:0});c=k=0;e.initialised||e.tearUp();a.hasFocus&&e.focus(b,d)};e.focus=g;e.blur=f;e.move=d;e.zoom=function(a,b){d(a,b,!1)}}})(jQuery);