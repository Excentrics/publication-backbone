<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Publication-backbone : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Publication-backbone</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Excentrics/publication-backbone">View on GitHub</a>

          <h1 id="project_title">Publication-backbone</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Excentrics/publication-backbone/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Excentrics/publication-backbone/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="publication-backbone" class="anchor" href="#publication-backbone" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>publication-backbone</h1>

<p>This is a stand-alone module, which provides a flexible,
scalable publications management system with flexible block content.
An example of a site where it works <a href="http://www.beladm.ru">http://www.beladm.ru</a></p>

<h1>
<a id="installations" class="anchor" href="#installations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installations</h1>

<p>First install the module, preferably in a your project virtual environment</p>

<pre><code>pip install https://github.com/Excentrics/publication-backbone.git
</code></pre>

<p>The main dependencies will be automatically installed.</p>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>

<p>To have a standard setup with publication-backbone, use</p>

<p>In <code>settings.py</code></p>

<pre><code>STATICFILES_FINDERS = (
    ...
    'pipeline.finders.PipelineFinder',
    'compressor.finders.CompressorFinder',
    ...
)

INSTALLED_APPS += (
    ...
    # Required dependencies
    'sorl.thumbnail',
    'mptt',
    'parler',
    'polymorphic',
    'polymorphic_tree',

    # Contrib
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sites',
    'django.contrib.sitemaps',

    # The Main apps
    'publication_backbone',
    'fluent_pages.pagetypes.fluentpage',
    'fluent_contents',
    'django_wysiwyg',

    # Optional other CMS page types
    'fluent_pages.pagetypes.redirectnode',

    # CSS and JS compressor, use for templates
    'compressor',

    # Settings store backend
    'constance',
    'constance.backends.database',

    # For admin
    'django_mptt_admin',
    'salmonella',

    # CKEditor
    'ckeditor',

    # Publication Backbone Plugins
    'publication_backbone.plugins.text',
    'publication_backbone.plugins.content_gap',
    'publication_backbone.plugins.snippet',
    'publication_backbone.plugins.yandex_map',
    'publication_backbone.plugins.file',
    'publication_backbone.plugins.picture',
    'publication_backbone.plugins.form_designer_plugin',
    'publication_backbone.plugins.promo',
    'publication_backbone.plugins.sub_menu',
    'publication_backbone.plugins.sitemap',
    'publication_backbone.interview',
    'publication_backbone.quiz',

    # Beautiful fields
    'beautiful_fields',

    # CSS and JS builder
    'twitter_bootstrap',
    'pipeline',

    # Additional fields
    'any_imagefield',
    'any_urlfield',

    # Django form designer
    'form_designer',

    # Search
    'publication_backbone.search.backends.haystack_backend',
    'haystack',
    'elasticstack',

    # Widget pages via django-fluent-contents
    'fluent_pages.pagetypes.fluentpage',
    'fluent_contents',
    'fluent_contents.plugins.text',
    'django_wysiwyg',

    # Optional other CMS page types
    'fluent_pages.pagetypes.redirectnode',
    ...
)

DJANGO_WYSIWYG_FLAVOR = "ckeditor"
DJANGO_WYSIWYG_MEDIA_URL = STATIC_URL + "ckeditor/"

CONSTANCE_BACKEND = 'constance.backends.database.DatabaseBackend'


PIPELINE_COMPILERS = (
  'pipeline.compilers.less.LessCompiler',
  'pipeline.compilers.coffee.CoffeeScriptCompiler',
)

STATICFILES_STORAGE = 'pipeline.storage.PipelineStorage'

# Relative path to publication_backbone directory must be replace to yours
if DEBUG:
    PIPELINE_LESS_ARGUMENTS = "-ru --source-map --include-path=../../../../../src/publicationbackbone/publication_backbone/:../../../../../lib/python2.7/site-packages/publication_backbone/:../../../../../lib/python2.7/site-packages/twitter_bootstrap/"
else:
    PIPELINE_LESS_ARGUMENTS = "-ru --clean-css --compress --include-path=../../../../../lib/python2.7/site-packages/publication_backbone/:../../../../../lib/python2.7/site-packages/twitter_bootstrap/"

PIPELINE_CSS = {
    'styles': {
        'source_filenames': (
            'src/less/styles.less',
        ),
        'output_filename': 'css/styles.css',
        'extra_context': {
            'media': 'screen',
        },
    },
}

PIPELINE_JS = {
    'bootstrap': {
        'source_filenames': (
          'twitter_bootstrap/js/transition.js',
          'twitter_bootstrap/js/alert.js',
          'twitter_bootstrap/js/button.js',
          'twitter_bootstrap/js/carousel.js',
          'twitter_bootstrap/js/collapse.js',
          'twitter_bootstrap/js/dropdown.js',
          'twitter_bootstrap/js/modal.js',
          'twitter_bootstrap/js/tooltip.js',
          'twitter_bootstrap/js/popover.js',
          'twitter_bootstrap/js/scrollspy.js',
          'twitter_bootstrap/js/tab.js',
          'twitter_bootstrap/js/affix.js',
        ),
        'output_filename': 'js/bootstrap.js',
    },
}

THUMBNAIL_ENGINE = 'publication_backbone.utils.sorl_pil_engine.Engine'

FLUENT_PAGES_TEMPLATE_DIR = os.path.join(TEMPLATE_DIRS[0], 'pages')

CKEDITOR_CONFIGS = {'default': {
    'toolbar': [
                ['ShowBlocks'],
                ['Cut', 'Copy', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo'],
                ['Find', 'Replace'],
                ['Source', 'Maximize'],
                '/',
                ['Bold', 'Italic', 'Underline', 'Strike', '-', 'Subscript', 'Superscript', '-', 'RemoveFormat'],
                ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'],
                '/',
                ['Format', 'Styles', 'Font', 'FontSize'],
                ['TextColor', 'BGColor'],
                ['Link', 'Unlink', 'Anchor'],
                ['Table', 'HorizontalRule', 'SpecialChar', 'Iframe'],
            ],
    'skin': 'moono',
}}

CKEDITOR_UPLOAD_PATH = "uploads/"

CKEDITOR_IMAGE_BACKEND = "pillow"

CKEDITOR_JQUERY_URL = '//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js'

COMPRESS_OUTPUT_DIR = 'publication_backbone_cache'

# haystack search settings _CHANGE_THIS_SETTINGS_TO_YOURS_SEARCH_ENGINE!
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',
        'URL': 'http://127.0.0.1:9200/',
        'INDEX_NAME': '&lt;index_name&gt;',
    }
}

PUBLICATION_BACKBONE_SEARCH_BACKENDS = [
    'publication_backbone.search.backends.haystack_backend.haystack_search.HaystackSearchBackend',
]

HAYSTACK_SEARCH_RESULTS_PER_PAGE = 15
HAYSTACK_SIGNAL_PROCESSOR = 'haystack.signals.RealtimeSignalProcessor'

CONSTANCE_CONFIG = {
    'META_CONTAINER': ("", _("Meta block")),
    'COUNTERS': ("", _("External counters code (put into block after body tag (do not use image)")),
}
</code></pre>

<p>In <code>urls.py</code>
    ...
    from django.contrib import admin
    from django.contrib.sites.models import Site
    from django.views.generic import TemplateView</p>

<pre><code>urlpatterns += patterns('',
    url(r'^robots.txt$',
       TemplateView.as_view(template_name='robots.txt',
                            content_type='text/plain',
                            get_context_data=lambda: {'domain': Site.objects.get_current().domain},),
       name='robots.txt'),
    url(r'^', include('publication_backbone.sitemap.urls'), name='sitemap'),
    url(r'^admin/salmonella/', include('salmonella.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^', include('publication_backbone.urls')),
    url(r'', include('fluent_pages.urls')),
)
...
</code></pre>

<h2>
<a id="addition" class="anchor" href="#addition" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Addition</h2>

<p>In the folder <code>additional</code> , you can find the necessary to your project directory <code>static</code>, <code>templates</code>
and <code>locale</code>. Without this folders your project will not work. Just copy them to the root of your project.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Publication-backbone maintained by <a href="https://github.com/Excentrics">Excentrics</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
